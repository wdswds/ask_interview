## 容错机制
1.  失败自动切换：调用失败后基于retries=2重试其他服务器
2.  快速失败：只发起一次调用，失败立即报错
3.  忽略失败：失败后忽略，不抛出异常给客户端
4.  失败重试：失败自动恢复，后台记录失败请求，定时重发。5秒后仅重试一次
5.  并行调用：只要一个成功即返回，并行调用指定数量机器，可通过forks=2来设置最大并行数
6.  广播调用：广播调用所有提供者，逐个调用，任意一台报错则报错

## 长连接的实现与配置
1.  如何建立长连接？
    引用服务增加提供者，获取连接，先判断是否是共享连接，如果是直接从缓存里面取，如果不是，去创建链接客户端，并开启心跳检测定时任务，开链接状态检测。
2.  如何判定链接有效性（心跳机制）
    在创建一个连接客户端同时也会创建一个心跳客户端，客户端默认基于60秒发送一次心跳来保持连接的存活，可通过 heartbeat  设置。
3.  断线重连？
    每创建一个客户端连接都会启动一个定时任务每两秒中检测一次当前连接状态，如果断线则自动重连。不是一直重连，Zookeeper在40s后会通知服务端服务已经挂掉，随后进行连接销毁
4.  链接的销毁
    Zookeeper在40s后会通知服务端服务已经挂掉